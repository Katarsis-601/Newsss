(()=>{"use strict";let e="https://api-berita-indonesia.vercel.app/";const t=async(t=null,n=null)=>null!=t?await fetch(`${e}${t}/${n}`):await fetch(e);let n=(e,t)=>`<option value=${"all"===e?"all":e.name} data-index-channel=${t}>\n    ${"all"===e?"All":e.name.toUpperCase()}\n  </option>`;async function a(e,a=null,l=!1){return await t().then((e=>e.json())).then((async t=>{let s,i=[];return"category"===e?s="all"===a?(e=>{let t=e.endpoints,n=[],a=new Set;for(let e of t)for(let t in e.paths)n.push(e.paths[t]),a.add(e.paths[t].name);let l=[];return a.forEach((e=>{for(let t of n)if(t.name===e){l.push(t);break}})),l.sort(((e,t)=>e.name>t.name))})(t):t.endpoints[a].paths:"channel"===e&&(s=t.endpoints),s.map(((e,t)=>i.push(n(e,t)))),!0===l&&i.unshift(n("all","all")),i})).catch((()=>alert("Try to reload this page or Check your connection internet")))}const l=document.getElementsByClassName("channel-sort")[0];a("channel",null,!0).then((e=>{l.innerHTML=e}));const s=e=>`<div class="news_box w-1/4 h-2/5 flex flex-col p-5 border m-4">\n    <h4 class="font-bold text-xs">${e.title}</h4>\n    <img src="${e.thumbnail}" loading="lazy" class="w-auto mt-4 mb-4">\n    <a href="${e.link}" clas="mt-2 text-xs" target="_blank">${e.description}</a>\n  </div>`,i=(e,t=!1)=>t?e.map((e=>`<div class="content flex flex-col m-4 flex-wrap">\n      <h3 class="news-title mb-4">${e.data.title}</h3>\n      <div class="news flex flex-row justify-center flex-wrap">\n          ${e.data.posts.map((e=>s(e)))}\n      </div>\n    </div>`)):`<div class="content flex flex-col m-4 flex-wrap">\n    <h3 class="news-title mb-4">${e.data.title}</h3>\n    <div class="news flex flex-row justify-center flex-wrap">\n        ${e.data.posts.map((e=>s(e)))}\n    </div>\n    </div>`;let o=document.getElementsByClassName("news-content-container")[0];async function r(n="all",a="terbaru"){let l;if(o.innerHTML="Loading....","all"===n){l=await async function(e){let n=[];return await t().then((e=>e.json())).then((t=>{let a=t.endpoints;(e=>{let t=e.endpoints,n=[];for(let e of t)n.push(e.name);return n})(t).map(((t,l)=>{a[l].paths.map((a=>{e===a.name&&n.push(t)}))}))})),n}(a);let n=((t,n)=>t.map((t=>fetch(`${e}${t}/${n}`))))(l,a);return await Promise.all(n).then((e=>e)).then((e=>Promise.all(e.map((e=>e.json()))))).then((async e=>{"Not found"!=e[0].message?o.innerHTML=await i(e,!0):o.innerHTML="Tidak ada Berita"})).catch((e=>alert(e)))}return await t(n,a).then((e=>e.json())).then((async e=>{o.innerHTML=await i(e)}))}const c=document.getElementsByClassName("channel-sort")[0],d=document.getElementsByClassName("category-sort")[0];let h=e=>a("category",e);(()=>{let e="terbaru",t="all";c.addEventListener("input",(n=>{t=n.target.options[c.selectedIndex],h(t.dataset.indexChannel).then((n=>{d.innerHTML=n,e=d[0].value,r(t.value,e)}))})),d.addEventListener("input",(n=>{e=n.target.options[d.selectedIndex].value,r(t.value,e)})),h("all").then((e=>{d.innerHTML=e}))})(),r()})();